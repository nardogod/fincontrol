(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{49797:function(e,t,r){Promise.resolve().then(r.bind(r,73287)),Promise.resolve().then(r.bind(r,91530)),Promise.resolve().then(r.bind(r,38849)),Promise.resolve().then(r.t.bind(r,50911,23)),Promise.resolve().then(r.t.bind(r,47960,23))},73287:function(e,t,r){"use strict";r.d(t,{default:function(){return N}});var n=r(57437),s=r(2265),a=r(58113),i=r(92595),o=r(34029),c=r(90535),d=r(22835);let l=(0,c.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,d.cn)(l({variant:r}),t),...s})}var f=r(18420),m=r(60044),v=r(91723),p=r(89345),g=r(37806),x=r(30401),h=r(32489);function b(){let{invites:e,isLoading:t,respondToInvite:r}=function(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),i=(0,a.e)(),o=async()=>{try{var e;n(!0);let{data:r}=await i.auth.getUser();if(!(null===(e=r.user)||void 0===e?void 0:e.email))return;try{let{data:e,error:n}=await i.from("account_invites").select("\n            *,\n            account:accounts(\n              id,\n              name,\n              description,\n              icon,\n              type\n            )\n          ").eq("invited_email",r.user.email).eq("status","pending").order("created_at",{ascending:!1});if(n)throw n;t(e||[]),console.log("✅ Convites carregados do banco de dados")}catch(n){console.log("\uD83D\uDD04 Carregando convites do localStorage");let e=JSON.parse(localStorage.getItem("account_invites")||"[]").filter(e=>e.invited_email===r.user.email&&"pending"===e.status);t(e),console.log("✅ Convites carregados do localStorage")}}catch(e){console.error("Error loading invites:",e)}finally{n(!1)}},c=async e=>{try{let{data:t,error:r}=await i.from("account_invites").insert(e).select().single();if(r)throw r;return t}catch(e){throw console.error("Error sending invite:",e),e}},d=async(t,r)=>{try{if(t.startsWith("local_")){let e=JSON.parse(localStorage.getItem("account_invites")||"[]"),n=e.findIndex(e=>e.id===t);if(-1!==n){if(e[n].status=r,localStorage.setItem("account_invites",JSON.stringify(e)),"accepted"===r){let t=e[n],{error:r}=await i.from("account_members").insert({account_id:t.account_id,role:t.role});r&&console.error("Erro ao adicionar membro:",r)}console.log("✅ Convite atualizado no localStorage")}}else{let{error:n}=await i.from("account_invites").update({status:r}).eq("id",t);if(n)throw n;if("accepted"===r){let r=e.find(e=>e.id===t);if(r){let{error:e}=await i.from("account_members").insert({account_id:r.account_id,role:r.role});if(e)throw e}}console.log("✅ Convite atualizado no banco de dados")}await o()}catch(e){throw console.error("Error responding to invite:",e),e}};return(0,s.useEffect)(()=>{o()},[]),{invites:e,isLoading:r,loadInvites:o,sendInvite:c,respondToInvite:d}}(),{toast:c}=(0,f.pm)(),[d,l]=(0,s.useState)(null),b=async e=>{try{l(e),await r(e,"accepted"),c({title:"Convite aceito!",description:"Voc\xea agora faz parte desta conta."})}catch(e){console.error("Error accepting invite:",e),c({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel aceitar o convite."})}finally{l(null)}},y=async e=>{try{l(e),await r(e,"rejected"),c({title:"Convite rejeitado",description:"O convite foi rejeitado."})}catch(e){console.error("Error rejecting invite:",e),c({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel rejeitar o convite."})}finally{l(null)}};return t?(0,n.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):0===e.length?null:(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,n.jsxs)(o.Zb,{className:"border-blue-200 bg-blue-50",children:[(0,n.jsx)(o.Ol,{className:"pb-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.Z,{className:"h-5 w-5 text-blue-600"}),(0,n.jsx)(o.ll,{className:"text-lg",children:"Convite para Conta"})]}),(0,n.jsxs)(u,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[(0,n.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),"Pendente"]})]})}),(0,n.jsxs)(o.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4"}),(0,n.jsxs)("span",{children:["Convite enviado para: ",e.invited_email]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,n.jsx)(g.Z,{className:"h-4 w-4"}),(0,n.jsxs)("span",{children:["Fun\xe7\xe3o: ","owner"===e.role?"Propriet\xe1rio":"Membro"]})]})]}),(0,n.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,n.jsx)(i.z,{onClick:()=>b(e.id),disabled:d===e.id,className:"flex-1 bg-green-600 hover:bg-green-700",size:"sm",children:d===e.id?(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Aceitar"]})}),(0,n.jsxs)(i.z,{onClick:()=>y(e.id),disabled:d===e.id,variant:"outline",className:"flex-1 border-red-300 text-red-600 hover:bg-red-50",size:"sm",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Rejeitar"]})]})]})]},e.id))})}var y=r(94766);function N(e){let{children:t}=e,[r,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[l,u]=(0,s.useState)(!0),f=(0,a.e)();(0,s.useEffect)(()=>{m()},[]);let m=async()=>{try{var e;let{data:t}=await f.auth.getUser();if(!(null===(e=t.user)||void 0===e?void 0:e.email)){u(!1);return}let{data:r,error:n}=await f.from("account_invites").select("id").eq("invited_email",t.user.email).eq("status","pending");if(n)throw n;o(((null==r?void 0:r.length)||0)>0)}catch(e){console.error("Error checking invites:",e)}finally{u(!1)}};return l?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)(n.Fragment,{children:[t,r&&(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:c?(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl border p-4 max-h-96 overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h3",{className:"font-semibold text-lg",children:"Convites Pendentes"}),(0,n.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,n.jsx)(b,{})]}):(0,n.jsxs)(i.z,{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg",children:[(0,n.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Voc\xea tem convites pendentes"]})})]})}},92595:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var n=r(57437),s=r(2265),a=r(37053),i=r(90535),o=r(22835);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...l}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(c({variant:s,size:i,className:r})),ref:t,...l})});d.displayName="Button"},34029:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return l},eW:function(){return u},ll:function(){return c}});var n=r(57437),s=r(2265),a=r(22835);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});l.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},91530:function(e,t,r){"use strict";r.d(t,{Toaster:function(){return x}});var n=r(57437),s=r(2265),a=r(41915),i=r(90535),o=r(32489),c=r(22835);let d=a.zt,l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.l_,{ref:t,className:(0,c.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...s})});l.displayName=a.l_.displayName;let u=(0,i.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=s.forwardRef((e,t)=>{let{className:r,variant:s,...i}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,c.cn)(u({variant:s}),r),...i})});f.displayName=a.fC.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.aU,{ref:t,className:(0,c.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...s})}).displayName=a.aU.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.x8,{ref:t,className:(0,c.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...s,children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})});m.displayName=a.x8.displayName;let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,c.cn)("text-sm font-semibold",r),...s})});v.displayName=a.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,c.cn)("text-sm opacity-90",r),...s})});p.displayName=a.dk.displayName;var g=r(18420);function x(){let{toasts:e}=(0,g.pm)();return(0,n.jsxs)(d,{children:[e.map(function(e){let{id:t,title:r,description:s,action:a,...i}=e;return(0,n.jsxs)(f,{...i,children:[(0,n.jsxs)("div",{className:"grid gap-1",children:[r&&(0,n.jsx)(v,{children:r}),s&&(0,n.jsx)(p,{children:s})]}),a,(0,n.jsx)(m,{})]},t)}),(0,n.jsx)(l,{})]})}},38849:function(e,t,r){"use strict";r.d(t,{A:function(){return o},SidebarProvider:function(){return i}});var n=r(57437),s=r(2265);let a=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)(!1);return(0,n.jsx)(a.Provider,{value:{isCollapsed:r,toggleSidebar:()=>{i(!r)}},children:t})}function o(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useSidebar must be used within a SidebarProvider");return e}},18420:function(e,t,r){"use strict";r.d(t,{Am:function(){return u},pm:function(){return f}});var n=r(2265);let s=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"REMOVE_TOAST",toastId:e})},5e3);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function l(e){d=o(d,e),c.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(d);return n.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},58113:function(e,t,r){"use strict";r.d(t,{e:function(){return s}});var n=r(20338);function s(){return(0,n.createBrowserClient)("https://ncysankyxvwsuwbqmmtj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5jeXNhbmt5eHZ3c3V3YnFtbXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MDA4NTAsImV4cCI6MjA3NjE3Njg1MH0.ZKKnsB3cCN6eJnvCNy3Wqehp9VmgeceXRHo4uwPQRb4")}s()},22835:function(e,t,r){"use strict";r.d(t,{XY:function(){return c},cn:function(){return a},p6:function(){return o},xG:function(){return i}});var n=r(61994),s=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function i(e){return new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK",minimumFractionDigits:2}).format(e)}function o(e){let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("sv-SE").format(t)}function c(e){return["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][e-1]||""}},47960:function(){}},function(e){e.O(0,[944,828,494,542,710,971,117,744],function(){return e(e.s=49797)}),_N_E=e.O()}]);