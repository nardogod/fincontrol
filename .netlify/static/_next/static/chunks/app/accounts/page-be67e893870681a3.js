(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[423],{29475:function(e,t,s){Promise.resolve().then(s.bind(s,48707)),Promise.resolve().then(s.bind(s,790)),Promise.resolve().then(s.bind(s,93001)),Promise.resolve().then(s.bind(s,23630)),Promise.resolve().then(s.bind(s,9592)),Promise.resolve().then(s.bind(s,43091)),Promise.resolve().then(s.t.bind(s,72972,23))},48707:function(e,t,s){"use strict";s.d(t,{default:function(){return N}});var a=s(57437),r=s(2265),n=s(27648),c=s(41671),l=s(76865),i=s(3085),o=s(58896),d=s(70525),m=s(95252),u=s(91723),x=s(76858);let h=(0,s(43664).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=s(34029),g=s(92595),f=s(22835),j=s(58113);function N(e){let{account:t,transactions:s}=e,{budget:N,isLoading:y}=function(e){let[t,s]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),c=(0,j.e)();(0,r.useEffect)(()=>{if(!e){n(!1);return}l()},[e]);let l=async()=>{try{n(!0);let t=localStorage.getItem("forecast_settings_".concat(e));if(t){let e=JSON.parse(t);s({monthly_budget:e.monthly_budget,alert_threshold:e.alert_threshold||80}),n(!1);return}let{data:a,error:r}=await c.from("account_forecast_settings").select("monthly_budget, alert_threshold").eq("account_id",e).single();r&&"PGRST116"!==r.code&&console.log("Tabela account_forecast_settings n\xe3o existe ainda"),a?s({monthly_budget:a.monthly_budget,alert_threshold:a.alert_threshold||80}):s({monthly_budget:null,alert_threshold:80})}catch(e){console.error("Erro ao carregar or\xe7amento:",e),s({monthly_budget:null,alert_threshold:80})}finally{n(!1)}};return{budget:t,isLoading:a}}(t.id),b=(0,r.useMemo)(()=>{let e=new Date,a=e.getMonth(),r=e.getFullYear(),n=s.filter(e=>e.account_id===t.id&&new Date(e.transaction_date).getMonth()===a&&new Date(e.transaction_date).getFullYear()===r),c=n.filter(e=>"income"===e.type).reduce((e,t)=>e+Number(t.amount),0),l=n.filter(e=>"expense"===e.type).reduce((e,t)=>e+Number(t.amount),0),i=(null==N?void 0:N.monthly_budget)||0,o=((null==N?void 0:N.alert_threshold)||80)/100*i,d="on-track";return l>i?d="over-budget":l>o&&(d="alert"),{income:c,expense:l,currentBalance:c-l,budget:i,remaining:Math.max(0,i-l),progress:i>0?l/i*100:0,status:d,thresholdAmount:o,transactionCount:n.length}},[t.id,s,N]),v=e=>{switch(e){case"on-track":return(0,a.jsx)(c.Z,{className:"h-4 w-4 text-green-600"});case"alert":return(0,a.jsx)(l.Z,{className:"h-4 w-4 text-yellow-600"});case"over-budget":return(0,a.jsx)(i.Z,{className:"h-4 w-4 text-red-600"});default:return(0,a.jsx)(o.Z,{className:"h-4 w-4 text-gray-600"})}};return(0,a.jsxs)(p.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsx)(p.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl text-white",style:{backgroundColor:t.color},children:(0,a.jsx)("span",{className:"text-lg",children:t.icon})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(p.ll,{className:"text-lg",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:t.type})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:v(b.status)})]})}),(0,a.jsxs)(p.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Receitas"})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-green-600",children:(0,f.xG)(b.income)})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-red-700",children:"Despesas"})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-red-600",children:(0,f.xG)(b.expense)})]})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Saldo Atual"})]}),(0,a.jsx)("p",{className:"text-xl font-bold ".concat(b.currentBalance>=0?"text-green-600":"text-red-600"),children:(0,f.xG)(b.currentBalance)})]}),b.budget>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Meta Mensal"})]}),(0,a.jsx)("span",{className:"text-sm font-bold text-blue-600",children:(0,f.xG)(b.budget)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Progresso"}),(0,a.jsxs)("span",{children:[Math.round(b.progress),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 ".concat("over-budget"===b.status?"bg-red-500":"alert"===b.status?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(100,b.progress),"%")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"text-center p-2 bg-blue-50 rounded",children:[(0,a.jsx)("p",{className:"text-blue-600 font-medium",children:"Restante"}),(0,a.jsx)("p",{className:"font-bold ".concat(b.remaining>0?"text-green-600":"text-red-600"),children:(0,f.xG)(b.remaining)})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-orange-50 rounded",children:[(0,a.jsx)("p",{className:"text-orange-600 font-medium",children:"Alerta em"}),(0,a.jsx)("p",{className:"font-bold text-orange-600",children:(0,f.xG)(b.thresholdAmount)})]})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg border ".concat("over-budget"===b.status?"bg-red-50 border-red-200":"alert"===b.status?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[v(b.status),(0,a.jsx)("span",{className:"text-sm font-medium ".concat((e=>{switch(e){case"on-track":return"text-green-600";case"alert":return"text-yellow-600";case"over-budget":return"text-red-600";default:return"text-gray-600"}})(b.status)),children:(e=>{switch(e){case"on-track":return"No prazo";case"alert":return"Aten\xe7\xe3o";case"over-budget":return"Acima do or\xe7amento";default:return"Indispon\xedvel"}})(b.status)})]}),"over-budget"===b.status&&(0,a.jsxs)("p",{className:"text-sm text-red-700 mt-1",children:["Voc\xea gastou ",(0,f.xG)(b.expense-b.budget)," ","acima da meta"]}),"alert"===b.status&&(0,a.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:["Voc\xea est\xe1 pr\xf3ximo do limite. Restam"," ",(0,f.xG)(b.remaining)]}),"on-track"===b.status&&(0,a.jsxs)("p",{className:"text-sm text-green-700 mt-1",children:["Voc\xea est\xe1 no prazo. Restam ",(0,f.xG)(b.remaining)," ","para gastar"]})]})]}),0===b.budget&&(0,a.jsxs)("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Sem meta definida"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Configure uma meta mensal nas configura\xe7\xf5es da conta"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 pt-2 border-t",children:[(0,a.jsxs)("span",{children:[b.transactionCount," transa\xe7\xf5es"]}),(0,a.jsx)("span",{children:"Este m\xeas"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-3",children:[(0,a.jsx)(n.default,{href:"/dashboard?account=".concat(t.id),className:"flex-1",children:(0,a.jsxs)(g.z,{variant:"outline",size:"sm",className:"w-full",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Acessar"]})}),(0,a.jsx)(n.default,{href:"/accounts/".concat(t.id,"/settings"),className:"flex-1",children:(0,a.jsxs)(g.z,{variant:"ghost",size:"sm",className:"w-full",children:[(0,a.jsx)(h,{className:"h-4 w-4 mr-2"}),"Configurar"]})})]})]})]})}},93001:function(e,t,s){"use strict";s.d(t,{default:function(){return N}});var a=s(57437),r=s(2265),n=s(3805),c=s(92595),l=s(81973),i=s(46393),o=s(34029),d=s(60044),m=s(99584),u=s(88226),x=s(95252),h=s(41671),p=s(49322),g=s(18420),f=s(58113),j=s(22835);function N(e){var t,s;let{accounts:N,onTransferComplete:y}=e,[b,v]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[Z,_]=(0,r.useState)({fromAccountId:"",toBankName:"",toAccountNumber:"",toAccountHolder:"",amount:"",description:"",transferType:"pix"}),[A,C]=(0,r.useState)({}),{toast:T}=(0,g.pm)(),z=(0,f.e)(),M=[{value:"pix",label:"PIX",description:"Transfer\xeancia instant\xe2nea"},{value:"ted",label:"TED",description:"Transfer\xeancia eletr\xf4nica"},{value:"doc",label:"DOC",description:"Documento de ordem de cr\xe9dito"}],B=()=>{let e={};return Z.fromAccountId||(e.fromAccountId="Selecione a conta de origem"),Z.toBankName.trim()||(e.toBankName="Nome do banco \xe9 obrigat\xf3rio"),Z.toAccountNumber.trim()||(e.toAccountNumber="N\xfamero da conta \xe9 obrigat\xf3rio"),Z.toAccountHolder.trim()||(e.toAccountHolder="Nome do titular \xe9 obrigat\xf3rio"),(!Z.amount||0>=parseFloat(Z.amount))&&(e.amount="Valor deve ser maior que zero"),C(e),0===Object.keys(e).length},E=async e=>{if(e.preventDefault(),B()){k(!0);try{let{data:{user:e},error:t}=await z.auth.getUser();if(t||!e)throw Error("Usu\xe1rio n\xe3o autenticado");let s=parseFloat(Z.amount);if(!N.find(e=>e.id===Z.fromAccountId))throw Error("Conta de origem n\xe3o encontrada");let{error:a}=await z.from("transactions").insert({account_id:Z.fromAccountId,type:"expense",amount:s,description:"Transfer\xeancia ".concat(Z.transferType.toUpperCase()," para ").concat(Z.toBankName," - ").concat(Z.toAccountHolder),transaction_date:new Date().toISOString().split("T")[0],created_via:"bank_transfer",user_id:e.id});if(a)throw a;T({title:"Transfer\xeancia banc\xe1ria agendada!",description:"Transfer\xeancia de ".concat((0,j.xG)(s)," para ").concat(Z.toBankName," foi processada.")}),_({fromAccountId:"",toBankName:"",toAccountNumber:"",toAccountHolder:"",amount:"",description:"",transferType:"pix"}),C({}),v(!1),null==y||y()}catch(e){console.error("Erro ao processar transfer\xeancia:",e),T({variant:"destructive",title:"Erro na transfer\xeancia",description:"N\xe3o foi poss\xedvel processar a transfer\xeancia. Tente novamente."})}finally{k(!1)}}},S=(e,t)=>{_(s=>({...s,[e]:t})),A[e]&&C(t=>({...t,[e]:""}))};return(0,a.jsxs)(n.Vq,{open:b,onOpenChange:v,children:[(0,a.jsx)(n.hg,{asChild:!0,children:(0,a.jsxs)(c.z,{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),"Transfer\xeancia Banc\xe1ria"]})}),(0,a.jsxs)(n.cZ,{className:"max-w-2xl",children:[(0,a.jsx)(n.fK,{children:(0,a.jsxs)(n.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-blue-600"}),"Transfer\xeancia Banc\xe1ria"]})}),(0,a.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{className:"text-sm font-medium",children:"Tipo de Transfer\xeancia"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3 mt-2",children:M.map(e=>(0,a.jsx)(o.Zb,{className:"cursor-pointer transition-colors ".concat(Z.transferType===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>S("transferType",e.value),children:(0,a.jsx)(o.aY,{className:"p-3",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(u.Z,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),(0,a.jsx)("p",{className:"font-medium text-sm",children:e.label}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})})},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"fromAccount",children:"Conta de Origem"}),(0,a.jsxs)("select",{id:"fromAccount",value:Z.fromAccountId,onChange:e=>S("fromAccountId",e.target.value),className:"w-full p-2 border rounded-md",children:[(0,a.jsx)("option",{value:"",children:"Selecione a conta"}),N.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - ",e.type]},e.id))]}),A.fromAccountId&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:A.fromAccountId})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"toBankName",children:"Nome do Banco"}),(0,a.jsx)(l.I,{id:"toBankName",value:Z.toBankName,onChange:e=>S("toBankName",e.target.value),placeholder:"Ex: Banco do Brasil"}),A.toBankName&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:A.toBankName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"toAccountNumber",children:"N\xfamero da Conta"}),(0,a.jsx)(l.I,{id:"toAccountNumber",value:Z.toAccountNumber,onChange:e=>S("toAccountNumber",e.target.value),placeholder:"Ex: 12345-6"}),A.toAccountNumber&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:A.toAccountNumber})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"toAccountHolder",children:"Nome do Titular"}),(0,a.jsx)(l.I,{id:"toAccountHolder",value:Z.toAccountHolder,onChange:e=>S("toAccountHolder",e.target.value),placeholder:"Nome completo do titular"}),A.toAccountHolder&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:A.toAccountHolder})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"amount",children:"Valor da Transfer\xeancia"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(l.I,{id:"amount",type:"number",step:"0.01",value:Z.amount,onChange:e=>S("amount",e.target.value),placeholder:"0.00",className:"pl-10"})]}),A.amount&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:A.amount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i._,{htmlFor:"description",children:"Descri\xe7\xe3o (Opcional)"}),(0,a.jsx)(l.I,{id:"description",value:Z.description,onChange:e=>S("description",e.target.value),placeholder:"Ex: Pagamento de servi\xe7os"})]})]}),Z.fromAccountId&&Z.amount&&(0,a.jsx)(o.Zb,{className:"bg-blue-50 border-blue-200",children:(0,a.jsxs)(o.aY,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Resumo da Transfer\xeancia"})]}),(0,a.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"De:"})," ",null===(t=N.find(e=>e.id===Z.fromAccountId))||void 0===t?void 0:t.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Para:"})," ",Z.toBankName," - ",Z.toAccountHolder]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Valor:"})," ",(0,j.xG)(parseFloat(Z.amount)||0)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tipo:"})," ",null===(s=M.find(e=>e.value===Z.transferType))||void 0===s?void 0:s.label]})]})]})}),(0,a.jsx)(o.Zb,{className:"bg-yellow-50 border-yellow-200",children:(0,a.jsx)(o.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("p",{className:"font-medium",children:"Aviso Importante:"}),(0,a.jsx)("p",{children:"Esta \xe9 uma simula\xe7\xe3o de transfer\xeancia banc\xe1ria. Em um sistema real, esta opera\xe7\xe3o seria processada atrav\xe9s de APIs banc\xe1rias seguras."})]})]})})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>v(!1),disabled:w,children:"Cancelar"}),(0,a.jsx)(c.z,{type:"submit",disabled:w||!Z.fromAccountId||!Z.amount,className:"bg-blue-600 hover:bg-blue-700",children:w?"Processando...":"Confirmar Transfer\xeancia"})]})]})]})]})}},23630:function(e,t,s){"use strict";s.d(t,{default:function(){return h}});var a=s(57437),r=s(2265),n=s(58113),c=s(18420),l=s(3805),i=s(92595),o=s(34029),d=s(41875);let m=(0,s(43664).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var u=s(49322),x=s(91723);function h(e){let{children:t}=e,[s,h]=(0,r.useState)([]),[p,g]=(0,r.useState)(!1),[f,j]=(0,r.useState)(null),[N,y]=(0,r.useState)(!1),{toast:b}=(0,c.pm)(),v=(0,n.e)();(0,r.useEffect)(()=>{N&&w()},[N]);let w=async()=>{try{g(!0);let{data:{user:e}}=await v.auth.getUser();if(!e)return;let{data:t,error:s}=await v.from("deleted_accounts").select("*").eq("user_id",e.id).eq("can_recover",!0).gt("recovery_expires_at",new Date().toISOString()).order("deleted_at",{ascending:!1});if(s){console.error("Error loading deleted accounts:",s);return}h(t||[])}catch(e){console.error("Error loading deleted accounts:",e)}finally{g(!1)}},k=async e=>{try{j(e.id);let{data:{user:t}}=await v.auth.getUser();if(!t)throw Error("Usu\xe1rio n\xe3o autenticado");let{data:s,error:a}=await v.from("accounts").insert({user_id:t.id,name:e.name,type:e.type,color:e.color,icon:e.icon,currency:e.currency,description:e.description}).select().single();if(a)throw a;let{error:r}=await v.from("account_members").insert({account_id:s.id,user_id:t.id,role:"owner"});if(r)throw r;let{error:n}=await v.from("deleted_accounts").update({can_recover:!1}).eq("id",e.id);n&&console.error("Error updating deleted account:",n),b({title:"Conta recuperada!",description:'A conta "'.concat(e.name,'" foi recuperada com sucesso.')}),await w()}catch(e){console.error("Error recovering account:",e),b({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel recuperar a conta: ".concat(e instanceof Error?e.message:"Erro desconhecido")})}finally{j(null)}},Z=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=e=>{let t=new Date;return Math.ceil((new Date(e).getTime()-t.getTime())/864e5)};return(0,a.jsxs)(l.Vq,{open:N,onOpenChange:y,children:[(0,a.jsx)(l.hg,{asChild:!0,children:t}),(0,a.jsxs)(l.cZ,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(l.fK,{children:[(0,a.jsxs)(l.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"h-5 w-5"}),"Recuperar Contas Exclu\xeddas"]}),(0,a.jsx)(l.Be,{children:"Voc\xea pode recuperar contas exclu\xeddas nos \xfaltimos 30 dias. Ap\xf3s esse per\xedodo, as contas ser\xe3o permanentemente removidas."})]}),(0,a.jsx)("div",{className:"space-y-4",children:p?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Carregando contas..."})]}):0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(u.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Nenhuma conta exclu\xedda encontrada."}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Contas exclu\xeddas h\xe1 mais de 30 dias n\xe3o podem ser recuperadas."})]}):s.map(e=>{let t=_(e.recovery_expires_at),s=t<=7;return(0,a.jsxs)(o.Zb,{className:"border-l-4 border-l-blue-500",children:[(0,a.jsx)(o.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center text-white text-lg",style:{backgroundColor:e.color},children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ll,{className:"text-lg",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:"personal"===e.type?"Pessoal":"shared"===e.type?"Compartilhada":"business"===e.type?"Empresa":"vehicle"===e.type?"Ve\xedculo":e.type})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(d.C,{variant:s?"destructive":"secondary",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),t," dias"]})})]})}),(0,a.jsx)(o.aY,{className:"pt-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["Exclu\xedda em: ",Z(e.deleted_at)]}),e.description&&(0,a.jsxs)("p",{className:"mt-1",children:["Descri\xe7\xe3o: ",e.description]})]}),(0,a.jsx)(i.z,{onClick:()=>k(e),disabled:f===e.id,className:"bg-green-600 hover:bg-green-700",children:f===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Recuperando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{className:"h-4 w-4 mr-2"}),"Recuperar"]})})]})})]},e.id)})}),(0,a.jsx)(l.cN,{children:(0,a.jsx)(i.z,{variant:"outline",onClick:()=>y(!1),children:"Fechar"})})]})]})}},43091:function(e,t,s){"use strict";s.d(t,{default:function(){return g}});var a=s(57437),r=s(2265),n=s(34029),c=s(95252),l=s(90740),i=s(87769),o=s(42208),d=s(70525),m=s(3085),u=s(32489),x=s(92595),h=s(339),p=s(22835);function g(e){let{accounts:t,transactions:s}=e,[g,f]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[y,b]=(0,r.useState)([]),[v,w]=(0,r.useState)(!1),[k,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Z(!0)},[]),(0,r.useEffect)(()=>{k&&t.length>0&&s.length>=0&&N((0,h.rT)(t,s,y.length>0?y:void 0))},[k,t,s,y]);let _=(e,t)=>{t?b([...y,e]):b(y.filter(t=>t!==e))};return k&&j?(0,a.jsxs)(n.Zb,{className:"mb-6 border-green-100 bg-gradient-to-r from-green-50 to-emerald-50",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-green-600"}),"Saldo Total Consolidado",y.length>0&&(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["(",y.length," conta",y.length>1?"s":""," selecionada",y.length>1?"s":"",")"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(x.z,{onClick:()=>w(!v),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),"Filtros"]}),(0,a.jsxs)(x.z,{onClick:()=>f(!g),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[g?(0,a.jsx)(i.Z,{className:"h-4 w-4"}):(0,a.jsx)(o.Z,{className:"h-4 w-4"}),g?"Mostrar":"Ocultar"]})]})]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Saldo Total"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:g?"••••••":(0,p.xG)(j.totalBalance)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[j.accountBalances.length," conta(s)"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Total Receitas"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:g?"••••••":(0,p.xG)(j.totalIncome)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Todas as contas"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-red-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Total Despesas"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:g?"••••••":(0,p.xG)(j.totalExpenses)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Todas as contas"})]})]}),v&&(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Filtrar por Contas:"}),(0,a.jsxs)(x.z,{onClick:()=>{b([])},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),"Limpar Filtros"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:j.accountBalances.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2 p-2 bg-white rounded-lg border hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:y.includes(e.accountId),onChange:t=>_(e.accountId,t.target.checked),className:"rounded"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.accountName})]},e.accountId))}),y.length>0&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Mostrando saldo de ",y.length," conta(s) selecionada(s)"]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Resumo por Conta:"}),(0,a.jsx)("div",{className:"space-y-2",children:j.accountBalances.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.currentBalance>=0?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.accountName})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-bold ".concat(e.currentBalance>=0?"text-green-600":"text-red-600"),children:g?"••••":(0,p.xG)(e.currentBalance)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.transactionCount," transa\xe7\xf5es"]})]})]},e.accountId))})]})]})]}):(0,a.jsxs)(n.Zb,{className:"mb-6 border-green-100 bg-gradient-to-r from-green-50 to-emerald-50",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-green-600"}),"Saldo Total Consolidado"]})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Carregando saldos das contas..."})})]})}},41875:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var a=s(57437);s(2265);var r=s(90535),n=s(22835);let c=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(c({variant:s}),t),...r})}},3805:function(e,t,s){"use strict";s.d(t,{$N:function(){return p},Be:function(){return g},Vq:function(){return i},cN:function(){return h},cZ:function(){return u},fK:function(){return x},hg:function(){return o}});var a=s(57437),r=s(2265),n=s(49027),c=s(32489),l=s(22835);let i=n.fC,o=n.xz,d=n.h_;n.x8;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});m.displayName=n.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...i,children:[r,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};x.displayName="DialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});p.displayName=n.Dx.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});g.displayName=n.dk.displayName},99584:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]])},76858:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},60044:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},49322:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},95252:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},87769:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},42208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},90740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},58896:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},3085:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},70525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},76865:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(43664).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},function(e){e.O(0,[828,972,494,945,707,428,790,971,117,744],function(){return e(e.s=29475)}),_N_E=e.O()}]);