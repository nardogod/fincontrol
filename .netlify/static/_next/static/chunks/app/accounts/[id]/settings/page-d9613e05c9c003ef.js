(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{65843:function(e,a,t){Promise.resolve().then(t.bind(t,6451))},6451:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return A}});var s=t(57437),r=t(2265),n=t(99376),i=t(9592),l=t(58896),o=t(95252),c=t(76865),d=t(70525),u=t(41671),m=t(43664);let x=(0,m.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),h=(0,m.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var f=t(34029),p=t(92595),g=t(81973),j=t(46393),v=t(60967),y=t(22835),b=t(58113),N=t(18420);function w(e){let{account:a,onSettingsUpdated:t}=e,[n,i]=(0,r.useState)(!1),[m,w]=(0,r.useState)(!1),[_,k]=(0,r.useState)({monthly_budget:null,alert_threshold:80,budget_type:"flexible",auto_adjust:!0,notifications_enabled:!0}),{toast:C}=(0,N.pm)(),Z=(0,b.e)();(0,r.useEffect)(()=>{E()},[a.id]);let E=async()=>{try{let e="forecast_settings_".concat(a.id),t=localStorage.getItem(e);if(t){let e=JSON.parse(t);k({monthly_budget:e.monthly_budget,alert_threshold:e.alert_threshold||80,budget_type:e.budget_type||"flexible",auto_adjust:void 0===e.auto_adjust||e.auto_adjust,notifications_enabled:void 0===e.notifications_enabled||e.notifications_enabled});return}let{data:s,error:r}=await Z.from("account_forecast_settings").select("*").eq("account_id",a.id).single();if(r&&"PGRST116"!==r.code){console.log("Tabela account_forecast_settings n\xe3o existe ainda, usando configura\xe7\xf5es padr\xe3o");return}s&&k({monthly_budget:s.monthly_budget,alert_threshold:s.alert_threshold||80,budget_type:s.budget_type||"flexible",auto_adjust:s.auto_adjust||!0,notifications_enabled:s.notifications_enabled||!0})}catch(e){console.error("Erro ao carregar configura\xe7\xf5es:",e)}},S=async()=>{try{w(!0);let e="forecast_settings_".concat(a.id);localStorage.setItem(e,JSON.stringify(_));try{let{error:e}=await Z.from("account_forecast_settings").upsert({account_id:a.id,monthly_budget:_.monthly_budget,alert_threshold:_.alert_threshold,budget_type:_.budget_type,auto_adjust:_.auto_adjust,notifications_enabled:_.notifications_enabled,updated_at:new Date().toISOString()});e&&console.log("Tabela account_forecast_settings n\xe3o existe ainda, salvando apenas no localStorage")}catch(e){console.log("Erro ao salvar no banco, usando localStorage:",e)}C({title:"Configura\xe7\xf5es salvas!",description:"As configura\xe7\xf5es de previs\xe3o foram atualizadas com sucesso."}),i(!1),null==t||t()}catch(e){console.error("Erro ao salvar configura\xe7\xf5es:",e),C({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel salvar as configura\xe7\xf5es."})}finally{w(!1)}};return(0,s.jsxs)(f.Zb,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-indigo-50",children:[(0,s.jsx)(f.Ol,{children:(0,s.jsxs)(f.ll,{className:"flex items-center gap-2 text-purple-800",children:[(0,s.jsx)(l.Z,{className:"h-5 w-5"}),"Configura\xe7\xf5es de Previs\xe3o - ",a.name]})}),(0,s.jsxs)(f.aY,{className:"space-y-6",children:[n?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"monthly_budget",children:"Or\xe7amento Mensal (kr)"}),(0,s.jsx)(g.I,{id:"monthly_budget",type:"number",value:_.monthly_budget||"",onChange:e=>k({..._,monthly_budget:e.target.value?Number(e.target.value):null}),placeholder:"Ex: 6000"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Deixe vazio para usar estimativa autom\xe1tica"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"alert_threshold",children:"Alerta em (%)"}),(0,s.jsx)(g.I,{id:"alert_threshold",type:"number",min:"1",max:"100",value:_.alert_threshold,onChange:e=>k({..._,alert_threshold:Number(e.target.value)})}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Quando receber alerta de gastos"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{children:"Tipo de Or\xe7amento"}),(0,s.jsxs)(v.Ph,{value:_.budget_type,onValueChange:e=>k({..._,budget_type:e}),children:[(0,s.jsx)(v.i4,{children:(0,s.jsx)(v.ki,{})}),(0,s.jsxs)(v.Bw,{children:[(0,s.jsx)(v.Ql,{value:"fixed",children:"Fixo - Valor definido"}),(0,s.jsx)(v.Ql,{value:"flexible",children:"Flex\xedvel - Baseado no hist\xf3rico"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(j._,{htmlFor:"auto_adjust",className:"text-sm font-medium",children:"Ajuste Autom\xe1tico"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Ajustar estimativas baseado no hist\xf3rico"})]}),(0,s.jsx)("input",{id:"auto_adjust",type:"checkbox",checked:_.auto_adjust,onChange:e=>k({..._,auto_adjust:e.target.checked}),className:"h-4 w-4 text-blue-600 rounded"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(j._,{htmlFor:"notifications",className:"text-sm font-medium",children:"Notifica\xe7\xf5es"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Receber alertas de gastos"})]}),(0,s.jsx)("input",{id:"notifications",type:"checkbox",checked:_.notifications_enabled,onChange:e=>k({..._,notifications_enabled:e.target.checked}),className:"h-4 w-4 text-blue-600 rounded"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(p.z,{onClick:S,disabled:m,className:"flex-1",children:[(0,s.jsx)(h,{className:"h-4 w-4 mr-2"}),m?"Salvando...":"Salvar"]}),(0,s.jsx)(p.z,{onClick:()=>{E(),i(!1)},variant:"outline",className:"flex-1",children:"Cancelar"})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-white rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Or\xe7amento Mensal"})]}),(0,s.jsx)("p",{className:"text-xl font-bold text-green-600",children:_.monthly_budget?(0,y.xG)(_.monthly_budget):"N\xe3o definido"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"fixed"===_.budget_type?"Or\xe7amento fixo":"Or\xe7amento flex\xedvel"})]}),(0,s.jsxs)("div",{className:"p-4 bg-white rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 text-orange-600"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Alerta em"})]}),(0,s.jsxs)("p",{className:"text-xl font-bold text-orange-600",children:[_.alert_threshold,"%"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:_.notifications_enabled?"Notifica\xe7\xf5es ativas":"Notifica\xe7\xf5es desativadas"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 text-blue-600"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Ajuste Autom\xe1tico"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[_.auto_adjust?(0,s.jsx)(u.Z,{className:"h-4 w-4 text-green-600"}):(0,s.jsx)("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:_.auto_adjust?"Ativado":"Desativado"})]})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(p.z,{onClick:()=>i(!0),className:"flex-1",variant:"outline",children:[(0,s.jsx)(x,{className:"h-4 w-4 mr-2"}),"Editar Configura\xe7\xf5es"]})})]}),(0,s.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 text-blue-600"}),(0,s.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Como Funciona"})]}),(0,s.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,s.jsxs)("p",{children:["• ",(0,s.jsx)("strong",{children:"Or\xe7amento Fixo:"})," Usa o valor definido como meta mensal"]}),(0,s.jsxs)("p",{children:["• ",(0,s.jsx)("strong",{children:"Or\xe7amento Flex\xedvel:"})," Calcula automaticamente baseado no hist\xf3rico"]}),(0,s.jsxs)("p",{children:["• ",(0,s.jsx)("strong",{children:"Ajuste Autom\xe1tico:"})," Atualiza estimativas conforme novos dados"]}),(0,s.jsxs)("p",{children:["• ",(0,s.jsx)("strong",{children:"Alertas:"})," Notifica quando atingir o percentual definido"]})]})]})]})]})}var _=t(89345);let k=(0,m.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),C=(0,m.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function Z(e){let{inviteLink:a,email:t,onClose:n}=e,{toast:i}=(0,N.pm)(),[l,o]=(0,r.useState)(!1),c=async()=>{try{await navigator.clipboard.writeText(a),o(!0),i({title:"Link copiado!",description:"O link do convite foi copiado para a \xe1rea de transfer\xeancia."}),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Error copying link:",e),i({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel copiar o link."})}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)(f.Zb,{className:"w-full max-w-md mx-4",children:[(0,s.jsx)(f.Ol,{children:(0,s.jsxs)(f.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(_.Z,{className:"h-5 w-5 text-blue-600"}),"Convite Enviado!"]})}),(0,s.jsxs)(f.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["O convite foi enviado para ",(0,s.jsx)("strong",{children:t})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Link do convite:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:a,readOnly:!0,className:"flex-1 text-xs bg-white border rounded px-2 py-1"}),(0,s.jsx)(p.z,{onClick:c,size:"sm",variant:"outline",className:"shrink-0",children:l?"✓":(0,s.jsx)(k,{className:"h-4 w-4"})})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(p.z,{onClick:()=>{window.open(a,"_blank")},className:"flex-1",variant:"outline",children:[(0,s.jsx)(C,{className:"h-4 w-4 mr-2"}),"Testar Link"]}),(0,s.jsx)(p.z,{onClick:n,className:"flex-1",children:"Fechar"})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[(0,s.jsx)("p",{children:(0,s.jsx)("strong",{children:"Para demonstra\xe7\xe3o:"})}),(0,s.jsx)("p",{children:"1. Copie o link acima"}),(0,s.jsx)("p",{children:"2. Abra em nova aba"}),(0,s.jsx)("p",{children:"3. Fa\xe7a login com o email convidado"}),(0,s.jsx)("p",{children:"4. Aceite o convite"})]})]})]})})}var E=t(3805),S=t(32660),z=t(95805),D=t(37806),M=t(18930);let O=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#06B6D4","#84CC16","#F97316"];function A(){let e=(0,n.useParams)(),a=(0,n.useRouter)(),{toast:l}=(0,N.pm)(),o=(0,b.e)(),[d,u]=(0,r.useState)(null),[m,x]=(0,r.useState)([]),[h,y]=(0,r.useState)(!0),[_,k]=(0,r.useState)(!1),[C,A]=(0,r.useState)(!1),[q,R]=(0,r.useState)(!1),[V,F]=(0,r.useState)(!1),[B,P]=(0,r.useState)({name:"",type:"personal",color:"#3B82F6",currency:"kr",description:""}),[T,U]=(0,r.useState)({email:"",role:"member"}),[I,Q]=(0,r.useState)(!1),[H,L]=(0,r.useState)(""),Y=e.id;(0,r.useEffect)(()=>{$()},[Y]);let $=async()=>{try{y(!0);let{data:e,error:a}=await o.from("accounts").select("*").eq("id",Y).single();if(a)throw a;u(e),P({name:e.name,type:e.type,color:e.color,currency:e.currency||"kr",description:e.description||""});let{data:t,error:s}=await o.from("account_members").select("\n          *,\n          user:users(full_name, email)\n        ").eq("account_id",Y);if(s)throw s;x(t||[])}catch(e){console.error("Error loading account:",e),l({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel carregar os dados da conta."})}finally{y(!1)}},J=async()=>{try{k(!0);let e={name:B.name,type:B.type,color:B.color,currency:B.currency,description:B.description||null},{error:a}=await o.from("accounts").update(e).eq("id",Y);if(a)throw a;l({title:"Conta atualizada!",description:"As configura\xe7\xf5es foram salvas com sucesso."}),await $()}catch(e){console.error("Error saving account:",e),l({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel salvar as altera\xe7\xf5es."})}finally{k(!1)}},G=async()=>{try{A(!0);let{data:{user:e},error:t}=await o.auth.getUser();if(t||!e)throw Error("Usu\xe1rio n\xe3o autenticado");if(console.log("Attempting to delete account:",Y),console.log("Current user:",e.id),console.log("Account owner:",null==d?void 0:d.user_id),(null==d?void 0:d.user_id)!==e.id)throw Error("Voc\xea n\xe3o tem permiss\xe3o para excluir esta conta");if((null==d?void 0:d.type)==="principal")throw Error("N\xe3o \xe9 poss\xedvel excluir a conta principal. Esta conta \xe9 necess\xe1ria para o funcionamento do sistema.");let{data:s}=await o.from("accounts").select("id").eq("user_id",e.id).order("created_at",{ascending:!0}),r=s||[];if(1===r.length&&r[0].id===Y)throw Error("N\xe3o \xe9 poss\xedvel excluir sua \xfanica conta. Crie outra conta antes de excluir esta.");console.log("Saving account to deleted_accounts...");let{error:n}=await o.from("deleted_accounts").insert({original_account_id:Y,user_id:e.id,name:d.name,type:d.type,color:d.color,icon:d.icon,currency:d.currency||"kr",description:d.description,can_recover:!0,recovery_expires_at:new Date(Date.now()+2592e6).toISOString()});n&&console.error("Error saving to deleted_accounts:",n),console.log("Deleting account...");let{data:i,error:c}=await o.from("accounts").delete().eq("id",Y).eq("user_id",e.id).select();if(c)throw console.error("Error deleting account:",c),c;console.log("Account deleted successfully:",i),l({title:"Conta exclu\xedda!",description:"A conta foi removida com sucesso."}),a.push("/accounts")}catch(e){console.error("Error deleting account:",e),l({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel excluir a conta: ".concat(e instanceof Error?e.message:"Erro desconhecido")})}finally{A(!1),R(!1)}},K=async()=>{try{var e,a;if(console.log("\uD83D\uDD0D Tentando enviar convite para:",T.email),!T.email||!T.email.includes("@")){l({variant:"destructive",title:"Email inv\xe1lido",description:"Por favor, insira um email v\xe1lido."});return}let s="invite_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),r="".concat(window.location.origin,"/invite/").concat(s);console.log("\uD83D\uDD17 Token gerado:",s),console.log("\uD83D\uDD17 Link gerado:",r);let{data:n}=await o.auth.getUser(),i=(null===(a=n.user)||void 0===a?void 0:null===(e=a.user_metadata)||void 0===e?void 0:e.full_name)||"Usu\xe1rio",c=(null==d?void 0:d.name)||"Conta";try{let{data:e,error:a}=await o.from("users").select("id, email, full_name").eq("email",T.email).single();if(a||!e){console.log("❌ Usu\xe1rio n\xe3o encontrado:",a),l({variant:"destructive",title:"Usu\xe1rio n\xe3o encontrado",description:"N\xe3o foi poss\xedvel encontrar um usu\xe1rio com este email."});return}let{data:t,error:s}=await o.from("account_members").select("*").eq("account_id",Y).eq("user_id",e.id).single();if(t&&!s){l({variant:"destructive",title:"Usu\xe1rio j\xe1 \xe9 membro",description:"Este usu\xe1rio j\xe1 faz parte desta conta."});return}let{data:r,error:n}=await o.from("account_members").insert({account_id:Y,user_id:e.id,role:T.role}).select().single();if(n)throw console.log("❌ Erro ao adicionar membro:",n),n;console.log("✅ Usu\xe1rio adicionado diretamente \xe0 conta:",r),l({title:"Usu\xe1rio adicionado!",description:"".concat(e.full_name||e.email," foi adicionado \xe0 conta.")}),F(!1),U({email:"",role:"member"});return}catch(t){console.log("\uD83D\uDD04 Banco n\xe3o dispon\xedvel, usando localStorage");let e=JSON.parse(localStorage.getItem("account_invites")||"[]"),a={id:"local_".concat(Date.now()),account_id:Y,invited_email:T.email,role:T.role,status:"pending",token:s,created_at:new Date().toISOString()};e.push(a),localStorage.setItem("account_invites",JSON.stringify(e)),console.log("✅ Convite salvo no localStorage:",a)}let{sendInviteEmail:u}=await t.e(611).then(t.bind(t,98611));await u({to:T.email,accountName:c,inviterName:i,inviteLink:r,role:"owner"===T.role?"Propriet\xe1rio":"Membro"}),console.log("✅ Email de convite enviado (fallback)"),L(r),Q(!0),F(!1),U({email:"",role:"member"})}catch(e){console.error("Error inviting user:",e),l({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel enviar o convite."})}},W=async e=>{try{let{error:a}=await o.from("account_members").delete().eq("id",e);if(a)throw a;l({title:"Membro removido!",description:"O membro foi removido da conta."}),await $()}catch(e){console.error("Error removing member:",e),l({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel remover o membro."})}};return h?(0,s.jsx)(i.default,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Carregando configura\xe7\xf5es..."})]})})}):d?(0,s.jsxs)(i.default,{children:[(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[(0,s.jsx)("div",{className:"border-b bg-white/95 shadow-sm backdrop-blur-sm",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-6 lg:px-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(p.z,{variant:"ghost",size:"icon",onClick:()=>a.push("/accounts"),children:(0,s.jsx)(S.Z,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900 sm:text-3xl",children:"Configura\xe7\xf5es da Conta"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:d.name})]})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 lg:px-6",children:[(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsxs)(f.Zb,{children:[(0,s.jsx)(f.Ol,{children:(0,s.jsx)(f.ll,{children:"Informa\xe7\xf5es da Conta"})}),(0,s.jsxs)(f.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"name",children:"Nome da Conta"}),(0,s.jsx)(g.I,{id:"name",value:B.name,onChange:e=>P({...B,name:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{children:"Tipo da Conta"}),(0,s.jsxs)(v.Ph,{value:B.type,onValueChange:e=>P({...B,type:e}),children:[(0,s.jsx)(v.i4,{children:(0,s.jsx)(v.ki,{})}),(0,s.jsxs)(v.Bw,{children:[(0,s.jsx)(v.Ql,{value:"personal",children:"Pessoal"}),(0,s.jsx)(v.Ql,{value:"shared",children:"Compartilhada"}),(0,s.jsx)(v.Ql,{value:"business",children:"Empresa"}),(0,s.jsx)(v.Ql,{value:"vehicle",children:"Ve\xedculo"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{children:"Cor da Conta"}),(0,s.jsx)("div",{className:"flex gap-2 flex-wrap",children:O.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>P({...B,color:e}),className:"h-8 w-8 rounded-full border-2 ".concat(B.color===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e}},e))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{children:"Moeda"}),(0,s.jsxs)(v.Ph,{value:B.currency,onValueChange:e=>P({...B,currency:e}),children:[(0,s.jsx)(v.i4,{children:(0,s.jsx)(v.ki,{placeholder:"Selecione uma moeda"})}),(0,s.jsxs)(v.Bw,{children:[(0,s.jsx)(v.Ql,{value:"kr",children:"Krone (kr)"}),(0,s.jsx)(v.Ql,{value:"real",children:"Real (R$)"}),(0,s.jsx)(v.Ql,{value:"dolar",children:"D\xf3lar ($)"}),(0,s.jsx)(v.Ql,{value:"euro",children:"Euro (€)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"description",children:"Descri\xe7\xe3o"}),(0,s.jsx)(g.I,{id:"description",value:B.description,onChange:e=>P({...B,description:e.target.value}),placeholder:"Descri\xe7\xe3o opcional"})]}),(0,s.jsx)("div",{className:"flex gap-3 pt-4",children:(0,s.jsx)(p.z,{onClick:J,disabled:_,className:"flex-1",children:_?"Salvando...":"Salvar Altera\xe7\xf5es"})})]})]}),(0,s.jsxs)(f.Zb,{children:[(0,s.jsx)(f.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(f.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(z.Z,{className:"h-5 w-5"}),"Membros (",m.length,")"]}),(0,s.jsxs)(E.Vq,{open:V,onOpenChange:F,children:[(0,s.jsx)(E.hg,{asChild:!0,children:(0,s.jsxs)(p.z,{size:"sm",children:[(0,s.jsx)(D.Z,{className:"h-4 w-4 mr-2"}),"Convidar"]})}),(0,s.jsxs)(E.cZ,{children:[(0,s.jsxs)(E.fK,{children:[(0,s.jsx)(E.$N,{children:"Convidar Usu\xe1rio"}),(0,s.jsx)(E.Be,{children:"Envie um convite para adicionar um usu\xe1rio \xe0 conta."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"email",children:"Email"}),(0,s.jsx)(g.I,{id:"email",type:"email",value:T.email,onChange:e=>U({...T,email:e.target.value}),placeholder:"usuario@exemplo.com"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{children:"Fun\xe7\xe3o"}),(0,s.jsxs)(v.Ph,{value:T.role,onValueChange:e=>U({...T,role:e}),children:[(0,s.jsx)(v.i4,{children:(0,s.jsx)(v.ki,{})}),(0,s.jsxs)(v.Bw,{children:[(0,s.jsx)(v.Ql,{value:"member",children:"Membro"}),(0,s.jsx)(v.Ql,{value:"owner",children:"Propriet\xe1rio"})]})]})]})]}),(0,s.jsxs)(E.cN,{children:[(0,s.jsx)(p.z,{variant:"outline",onClick:()=>F(!1),children:"Cancelar"}),(0,s.jsx)(p.z,{onClick:K,children:"Enviar Convite"})]})]})]})]})}),(0,s.jsx)(f.aY,{children:(0,s.jsx)("div",{className:"space-y-3",children:m.map(e=>{var a,t,r,n;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium",children:(null===(t=e.user)||void 0===t?void 0:null===(a=t.full_name)||void 0===a?void 0:a.charAt(0))||"?"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:(null===(r=e.user)||void 0===r?void 0:r.full_name)||"Usu\xe1rio"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:null===(n=e.user)||void 0===n?void 0:n.email})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"owner"===e.role?"Propriet\xe1rio":"Membro"}),"owner"!==e.role&&(0,s.jsx)(p.z,{variant:"ghost",size:"sm",onClick:()=>W(e.id),children:(0,s.jsx)(M.Z,{className:"h-4 w-4"})})]})]},e.id)})})})]})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(w,{account:d,onSettingsUpdated:()=>{console.log("Configura\xe7\xf5es de previs\xe3o atualizadas")}})}),(0,s.jsxs)(f.Zb,{className:"mt-6 border-red-200",children:[(0,s.jsx)(f.Ol,{children:(0,s.jsx)(f.ll,{className:"text-red-800",children:"Zona de Perigo"})}),(0,s.jsx)(f.aY,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-red-800",children:"Excluir Conta"}),(0,s.jsx)("p",{className:"text-sm text-red-600",children:(null==d?void 0:d.type)==="principal"?"A conta principal n\xe3o pode ser exclu\xedda. Esta conta \xe9 necess\xe1ria para o funcionamento do sistema.":"Esta a\xe7\xe3o n\xe3o pode ser desfeita. Todas as transa\xe7\xf5es ser\xe3o perdidas."})]}),(0,s.jsxs)(E.Vq,{open:q,onOpenChange:R,children:[(0,s.jsx)(E.hg,{asChild:!0,children:(0,s.jsxs)(p.z,{variant:"destructive",disabled:(null==d?void 0:d.type)==="principal",children:[(0,s.jsx)(M.Z,{className:"h-4 w-4 mr-2"}),(null==d?void 0:d.type)==="principal"?"N\xe3o Dispon\xedvel":"Excluir Conta"]})}),(0,s.jsxs)(E.cZ,{children:[(0,s.jsxs)(E.fK,{children:[(0,s.jsx)(E.$N,{children:"Confirmar Exclus\xe3o"}),(0,s.jsxs)(E.Be,{children:['Tem certeza que deseja excluir a conta "',d.name,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita e todas as transa\xe7\xf5es ser\xe3o perdidas.']})]}),(0,s.jsxs)(E.cN,{children:[(0,s.jsx)(p.z,{variant:"outline",onClick:()=>R(!1),children:"Cancelar"}),(0,s.jsx)(p.z,{variant:"destructive",onClick:G,disabled:C,children:C?"Excluindo...":"Excluir Conta"})]})]})]})]})})]})]})]}),I&&(0,s.jsx)(Z,{inviteLink:H,email:T.email,onClose:()=>Q(!1)})]}):(0,s.jsx)(i.default,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Conta n\xe3o encontrada"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"A conta que voc\xea est\xe1 procurando n\xe3o existe."}),(0,s.jsx)(p.z,{onClick:()=>a.push("/accounts"),children:"Voltar para Contas"})]})})})}},34029:function(e,a,t){"use strict";t.d(a,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var s=t(57437),r=t(2265),n=t(22835);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent";let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},3805:function(e,a,t){"use strict";t.d(a,{$N:function(){return f},Be:function(){return p},Vq:function(){return o},cN:function(){return h},cZ:function(){return m},fK:function(){return x},hg:function(){return c}});var s=t(57437),r=t(2265),n=t(49027),i=t(32489),l=t(22835);let o=n.fC,c=n.xz,d=n.h_;n.x8;let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=n.aV.displayName;let m=r.forwardRef((e,a)=>{let{className:t,children:r,...o}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[r,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let x=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};x.displayName="DialogHeader";let h=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};h.displayName="DialogFooter";let f=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});f.displayName=n.Dx.displayName;let p=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});p.displayName=n.dk.displayName},81973:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var s=t(57437),r=t(2265),n=t(22835);let i=r.forwardRef((e,a)=>{let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...i})});i.displayName="Input"},46393:function(e,a,t){"use strict";t.d(a,{_:function(){return c}});var s=t(57437),r=t(2265),n=t(6394),i=t(90535),l=t(22835);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.f,{ref:a,className:(0,l.cn)(o(),t),...r})});c.displayName=n.f.displayName},60967:function(e,a,t){"use strict";t.d(a,{Bw:function(){return f},Ph:function(){return d},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var s=t(57437),r=t(2265),n=t(63546),i=t(40875),l=t(22135),o=t(30401),c=t(22835);let d=n.fC;n.ZA;let u=n.B4,m=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(n.xz,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,s.jsx)(n.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=n.u_.displayName;let h=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=n.$G.displayName;let f=r.forwardRef((e,a)=>{let{className:t,children:r,position:i="popper",...l}=e;return(0,s.jsx)(n.h_,{children:(0,s.jsxs)(n.VY,{ref:a,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,s.jsx)(x,{}),(0,s.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(h,{})]})})});f.displayName=n.VY.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=n.__.displayName;let p=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(n.ck,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(n.eT,{children:r})]})});p.displayName=n.ck.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=n.Z0.displayName},32660:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},41671:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},95252:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},89345:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},58896:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},18930:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},70525:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},76865:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},37806:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},95805:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(43664).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[828,972,494,783,542,564,707,21,971,117,744],function(){return e(e.s=65843)}),_N_E=e.O()}]);